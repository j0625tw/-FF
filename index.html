<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å“ªå¤ å‘€ãƒ»NAGOYA 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <style>
        :root { --base: #F5F2ED; --accent: #8C7355; --text: #4A443F; }
        body { background-color: var(--base); color: var(--text); font-family: -apple-system, sans-serif; }
        .spot-card { background: white; border-radius: 20px; box-shadow: 0 4px 15px rgba(140, 115, 85, 0.05); border-left: 5px solid var(--accent); }
        .floating-nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 92%; max-width: 450px; background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); border-radius: 50px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); z-index: 100; }
        .date-btn.active { background: var(--accent); color: white; transform: scale(1.05); }
        .tag-pill { font-size: 10px; padding: 2px 8px; border-radius: 6px; background: #f0ede9; color: #8C7355; font-weight: bold; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-32">

    <header class="pt-8 px-6 mb-4 flex justify-between items-end">
        <div>
            <h1 class="text-3xl font-black text-[#8C7355] tracking-tight italic">NAGOYA</h1>
            <p class="text-[10px] tracking-[0.2em] text-gray-400 font-bold uppercase">JX838 âœˆï¸ JX839 | Winter Trip</p>
        </div>
        <div class="text-right">
            <p class="text-2xl font-light">6Â°C</p>
            <p class="text-[10px] text-gray-400">Nagoya, JP</p>
        </div>
    </header>

    <div class="px-6 mb-6">
        <div class="w-full h-44 rounded-[2.5rem] overflow-hidden shadow-lg border-4 border-white">
            <iframe id="map-frame" width="100%" height="100%" frameborder="0" src=""></iframe>
        </div>
    </div>

    <div class="flex overflow-x-auto px-6 space-x-3 mb-6 no-scrollbar" id="date-tabs"></div>
    <main id="app-content" class="px-6 space-y-5"></main>

    <nav class="floating-nav px-8 py-4 flex justify-between items-center text-gray-400">
        <i class="fas fa-calendar-day text-[#8C7355] text-xl"></i>
        <i class="fas fa-map-marked-alt text-xl"></i>
        <i class="fas fa-plus-circle text-3xl text-[#8C7355]" onclick="alert('Firebase æœªè¨­å®šï¼Œç›®å‰ç‚ºå”¯è®€æ¨¡å¼')"></i>
        <i class="fas fa-utensils text-xl"></i>
        <i class="fas fa-cog text-xl"></i>
    </nav>

    <script>
        // 1. Firebase é…ç½® (é¸å¡«)
        const firebaseConfig = { apiKey: "NONE", projectId: "NONE" }; // é è¨­ç©ºå€¼
        
        // 2. éœæ…‹è¡Œç¨‹è³‡æ–™ (ç•¶é€£ä¸ä¸Š Firebase æ™‚ä½¿ç”¨)
        const localData = {
            "1221": { title: "Day 1ï¼šæŠµé”åå¤å±‹", loc: "Nagoya", spots: [
                { time: "14:55", type: "äº¤é€š", name: "æ¡ƒåœ’æ©Ÿå ´ (JX838)", desc: "æ˜Ÿå®‡èˆªç©ºå‡ºç™¼", tags: ["âœˆï¸ å‡ºç™¼"] },
                { time: "18:30", type: "äº¤é€š", name: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´", desc: "æ­ä¹˜åéµ Î¼-SKY", tags: ["Î¼-SKY"] },
                { time: "20:00", type: "é…’åº—", name: "åå¤å±‹æ–°å¹¹ç·šå£å¤§å’ŒROYNETé…’åº—", desc: "å…¥ä½ä¼‘æ¯", tags: ["ä½å®¿"] },
                { time: "20:15", type: "é£Ÿç‰©", name: "é‡‘é¯±æ©«ä¸", desc: "æ™šé¤ï¼šå‘³å™Œè±¬æ’ã€é°»é­šé£¯", tags: ["å¿…åƒ"] }
            ]},
            "1222": { title: "Day 2ï¼šçŠ¬å±±åŸ + å¸‚å€", loc: "Inuyama", spots: [
                { time: "08:30", type: "æ™¯é»", name: "çŠ¬å±±åŸä¸‹ç”º", desc: "è€è¡—å’–å•¡ç”œé»", tags: ["æ‹ç…§"] },
                { time: "10:15", type: "æ™¯é»", name: "çŠ¬å±±åŸå¤©å®ˆé–£", desc: "ç™»ä¸Šåœ‹å¯¶å¤©å®ˆ", tags: ["å¿…çœ‹"] },
                { time: "13:30", type: "è³¼ç‰©", name: "å¤§é ˆå•†åº—è¡—", desc: "åå¤å±‹çš„å»šæˆ¿èˆ‡è§€éŸ³åƒæ‹œ", tags: ["å¿…è²·"] },
                { time: "15:15", type: "æ™¯é»", name: "Oasis 21", desc: "åœ°æ¨™æ‹ç…§ï¼Œçœ‹é›»è¦–å¡”", tags: ["æ‹ç…§"] }
            ]},
            "1223": { title: "Day 3ï¼šé«˜å±±å·¡ç¦®", loc: "Takayama", spots: [
                { time: "07:45", type: "äº¤é€š", name: "åå¤å±‹å·´å£«ç¸½ç«™", desc: "æ­ä¹˜æ¿ƒé£›å·´å£« ($3,100)", tags: ["éœ€é ç´„"] },
                { time: "11:00", type: "æ™¯é»", name: "é«˜å±±é™£å±‹", desc: "æ±Ÿæˆ¶æ™‚ä»£å®˜æ–¹å»ºç¯‰", tags: ["æ­·å²"] },
                { time: "13:00", type: "æ™¯é»", name: "ä¸Šä¸‰ä¹‹ç”º", desc: "é«˜å±±è€è¡—æ•£ç­–ï¼Œåƒé£›é©’ç‰›", tags: ["å¿…æ‹"] },
                { time: "18:00", type: "é£Ÿç‰©", name: "ä¸¸æ˜ é£›é©’ç‰›", desc: "æ™šé¤ï¼šé ‚ç´šç‡’è‚‰", tags: ["å¿…åƒ"] }
            ]},
            "1224": { title: "Day 4ï¼šåˆæŒæ‘", loc: "Shirakawa-go", spots: [
                { time: "07:20", type: "äº¤é€š", name: "é«˜å±±æ¿ƒé£›å·´å£«", desc: "å‰å¾€ç™½å·é„‰åˆæŒæ‘", tags: ["äº¤é€š"] },
                { time: "09:00", type: "æ™¯é»", name: "åŸå±±å±•æœ›å°", desc: "åˆæŒæ‘å…¨æ™¯æ‹æ”é»", tags: ["å¿…æ‹"] },
                { time: "14:30", type: "äº¤é€š", name: "ç™½å·é„‰å·´å£«ç«™", desc: "è¿”æŠµåå¤å±‹ç«™ (17:16)", tags: ["äº¤é€š"] }
            ]},
            "1225": { title: "Day 5ï¼šå‰åœåŠ›å…¬åœ’", loc: "Ghibli Park", spots: [
                { time: "08:30", type: "äº¤é€š", name: "æ„›ãƒ»åœ°çƒåšè¨˜å¿µå…¬åœ’", desc: "åœ°éµæ±å±±ç·šè½‰ Linimo", tags: ["äº¤é€š"] },
                { time: "10:00", type: "æ´»å‹•", name: "å‹•å‹•åŠ›æ£®æ—", desc: "å…¥åœ’é¦–ç«™æ¢ç´¢", tags: ["é ç´„"] },
                { time: "14:00", type: "æ´»å‹•", name: "å‰åœåŠ›å¤§å€‰åº«", desc: "ç¶“å…¸å ´æ™¯é›†åˆ", tags: ["å¿…çœ‹"] }
            ]},
            "1226": { title: "Day 6ï¼šæœ€çµ‚æ¡è³¼", loc: "Nagoya", spots: [
                { time: "09:00", type: "æ™¯é»", name: "ç†±ç”°ç¥å®®", desc: "ç¥å®®åƒæ‹œæ‹ç…§", tags: ["å¿…æ‹"] },
                { time: "10:45", type: "æ™¯é»", name: "åå¤å±‹åŸ", desc: "åƒè§€æœ¬ä¸¸å¾¡æ®¿", tags: ["é‡‘é¯±"] },
                { time: "15:30", type: "äº¤é€š", name: "åéµåå¤å±‹ç«™", desc: "æ­ Î¼-SKY å‰å¾€æ©Ÿå ´", tags: ["äº¤é€š"] },
                { time: "19:40", type: "äº¤é€š", name: "ä¸­éƒ¨æ©Ÿå ´ (JX839)", desc: "æ˜Ÿå®‡èˆªç©ºè¿”å°", tags: ["âœˆï¸ æ­¸é€”"] }
            ]}
        };

        let currentDay = "1221";

        function renderTabs() {
            const container = document.getElementById('date-tabs');
            container.innerHTML = Object.keys(localData).sort().map(day => `
                <button onclick="switchDay('${day}')" id="btn-${day}" 
                    class="date-btn flex-shrink-0 px-6 py-2.5 rounded-full bg-white shadow-sm text-sm font-bold transition-all ${currentDay === day ? 'active' : ''}">
                    ${day.slice(0,2)}/${day.slice(2)}
                </button>
            `).join('');
        }

        function switchDay(day) {
            currentDay = day;
            renderContent(localData[day]);
            document.querySelectorAll('.date-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`btn-${day}`).classList.add('active');
        }

        function renderContent(dayData) {
            const container = document.getElementById('app-content');
            document.getElementById('map-frame').src = `https://maps.google.com/maps?q=${encodeURIComponent(dayData.spots[0].name)}&t=&z=14&ie=UTF8&iwloc=&output=embed`;

            container.innerHTML = `<h2 class="text-xl font-bold mb-1">${dayData.title}</h2><p class="text-xs text-[#8C7355] mb-4">ğŸ“ ${dayData.loc}</p>`;
            container.innerHTML += dayData.spots.map(spot => `
                <div class="spot-card p-5 mb-4" onclick="window.open('https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(spot.name)}')">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <span class="text-[9px] bg-stone-100 text-[#8C7355] px-2 py-0.5 rounded font-bold uppercase">${spot.type}</span>
                            <h3 class="text-base font-bold text-gray-800 mt-1">${spot.name}</h3>
                            <p class="text-[12px] text-gray-500 mt-1">${spot.desc}</p>
                        </div>
                        <span class="text-sm font-black text-[#8C7355] font-mono ml-4">${spot.time}</span>
                    </div>
                    <div class="mt-3 flex gap-1">${spot.tags.map(t => `<span class="tag-pill">#${t}</span>`).join('')}</div>
                </div>
            `).join('');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // åˆå§‹åŒ–
        renderTabs();
        renderContent(localData[currentDay]);

        // å˜—è©¦åˆå§‹åŒ– Firebase (è‹¥å¤±æ•—å‰‡ç¶­æŒæœ¬åœ°æ¨¡å¼)
        try {
            firebase.initializeApp(firebaseConfig);
            const db = firebase.database();
            db.ref('itinerary').on('value', (s) => {
                if(s.val()) { /* å¦‚æœé›²ç«¯æœ‰è³‡æ–™å‰‡è¦†è“‹æœ¬åœ° */ }
            });
        } catch(e) { console.log("Running in Local Mode"); }
    </script>
</body>
</html>
